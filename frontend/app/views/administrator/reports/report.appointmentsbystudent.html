<div>
  <h2>Citas por Estudiante</h2>
  <hr>
  <ol class="breadcrumb">
    <li><a href="#/">Inicio</a></li>
    <li class="#/Administrador/Reportes">Reportes</li>
    <li class="active">Citas por Estudiante</li>
  </ol>
  <form autocomplete="off">
    <div cg-busy="AppsByStudent.promise"></div>
    <div id="reportContent">
      <div class="text-center">
        <p><b>Instituto Tecnol√≥gico de Costa Rica</b></p>
        <p><b>Escuela Ciencias del Lenguaje</b></p>
      </div>
      <div class="text-left">
      <p><b>Reporte: </b> Citas por estudiante </p>
      <div ng-show="AppsByStudent.period.start_date !=null && AppsByStudent.period.end_date!=null">
        <p><b>Periodo:</b> {{ AppsByStudent.period.start_date | date:'longDate' }} - {{ AppsByStudent.period.end_date | date:'longDate' }}</p>
      </div>
      <div ng-show="AppsByStudent.appointments.length > 0">
        <p><b>Estudiante:</b> {{AppsByStudent.appointments[0].student.username}} - {{AppsByStudent.appointments[0].student.full_name}} </p>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Software</th>
              <th>Laboratorio</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="app in AppsByStudent.appointments">
              <td>{{ app.date | date : 'd MMM y hh:mm a' }}</td>
              <td>{{ app.software.code }}</td>
              <td>{{ app.laboratory.name }}</td>
              <td>
                  <span class="label"
                  ng-class="{ 'label-success': app.state === 'Por iniciar',
                              'label-primary': app.state === 'Finalizada',
                              'label-danger': app.state === 'Cancelada'}" >
                  {{ app.state }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 text-left">
        <button type="button" class="btn btn-primary" ng-click="AppsByStudent.generateReport()" ng-show="AppsByStudent.appointments.length > 0 ">
          <i class="glyphicon glyphicon-file"></i> Descargar Reporte
        </button>
      </div>
    </div>
    <p ng-show="AppsByStudent.isLoaded() && AppsByStudent.isEmpty()">No se encontraron resultados.</p>
    <br>
    <div class="row" ng-show="AppsByStudent.totalPages > 1">
      <div class="col-md-12 pagination">
        <pagination ng-if="AppsByStudent.totalItems"
          ng-change="AppsByStudent.loadPage(true)" ng-model="AppsByStudent.page" items-per-page="AppsByStudent.limit"
          total-items="AppsByStudent.totalItems" max-size="5" boundary-links="true" rotate="true"
          previous-text="<" next-text=">" first-text="<<" last-text=">>"
        ></pagination>
      </div>
    </div>
  </form>
</div>
